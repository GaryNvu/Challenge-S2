CREATE TABLE Users (
    id SERIAL PRIMARY KEY,
    firstname VARCHAR(255) NOT NULL,
    lastname VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    role VARCHAR(255) NOT NULL DEFAULT 'ROLE_USER',
);

CREATE TABLE Category (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) UNIQUE
);

CREATE TABLE Brand (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) UNIQUE
);

CREATE TABLE Products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL UNIQUE,
    price FLOAT NOT NULL,
    description VARCHAR(255) NOT NULL UNIQUE,
    weight FLOAT NOT NULL,
    condition VARCHAR(255) NOT NULL,
    language VARCHAR(255) NOT NULL,
    stock INTEGER NOT NULL,
    image VARCHAR(255),
    category_id INTEGER,
    brand_id INTEGER,
    FOREIGN KEY (category_id) REFERENCES Category(id),
    FOREIGN KEY (brand_id) REFERENCES Brands(id)
);

CREATE TABLE Cart (
    cart_id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL,
    product_id INTEGER NOT NULL,
    quantity INTEGER NOT NULL DEFAULT 1,
    added_on TIMESTAMP WITHOUT TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES Users(id),
    FOREIGN KEY (product_id) REFERENCES Products(id)
);

CREATE TABLE "Orders" (
    id VARCHAR(50) NOT NULL PRIMARY KEY,
    userId INT NOT NULL,
    address VARCHAR(255) NOT NULL,
    total FLOAT NOT NULL,
    status VARCHAR(50) DEFAULT 'attente',
    paymentMethod VARCHAR(50),
    shippingFee FLOAT,
    discountCode VARCHAR(50),
    taxAmount FLOAT,
    deliveryTrackingNumber VARCHAR(100),
    note TEXT,
    createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (userId) REFERENCES "Users"(id)
);

CREATE TABLE "OrderItem" (
    id SERIAL PRIMARY KEY,
    orderId VARCHAR(50) NOT NULL,
    productId INT NOT NULL,
    quantity INT NOT NULL,
    price FLOAT NOT NULL,
    FOREIGN KEY (orderId) REFERENCES "Orders"(id),
    FOREIGN KEY (productId) REFERENCES "Products"(id)
);

docker-compose exec postgres psql "postgres://admin14:CardoryAdmin14@ng122737-001.eu.clouddb.ovh.net:45636/defaultdb?sslmode=require"